<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>index.html</title>
	<link href="style/style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<script>
 		window.onload = function(){
// 	function resize(){
// 	    $("#myCanvas").outerHeight($(window).height()-$("#myCanvas").offset().top- Math.abs($("#myCanvas").outerHeight(true) - $("#myCanvas").outerHeight()));
// 	  }
// 	  $(document).ready(function(){
// 	    resize();
// 	    $(window).on("resize", function(){
// 	        resize();
// 	    });
// 	  });


	//console.log("this function is functioning");
	let canvas = document.getElementById("myCanvas");
	let context = canvas.getContext("2d");
	let TextX = canvas.width/2;
  let TextY = canvas.height/2;


	let submitClick = function(event){
	//context.fillText(document.getElementById('floatingText').value, TextX, TextY);
	//declare a shape
	let writtenText = new CustomShape(canvas.width/2,canvas.height/2,this.clientWidth,this.clientHeight);
	console.log("width: "+this.clientWidth+ " height: "+this.clientHeight);
	requestAnimationFrame(run);
	//our run method
	function run(){
		context.clearRect(0,0,canvas.width,canvas.height);
	  writtenText.display();
	  writtenText.update();
	  //recursive call
	  requestAnimationFrame(run);
	}
	//document.getElementById('floatingText').value = null;
	//console.log("you pressed the submit button!");
	}

	let enterButton = document.getElementById('enterButton');
	enterButton.addEventListener('click', submitClick);


	function CustomShape(x,y,w,h){
	    //member properties
	    this.x=x;
	    this.y=y;
			this.w=w;
			this.h=h;

			console.log("x: "+this.x+ " y: "+this.y+ " w: "+ this.w+ " h: "+this.h);
	    //add in when we update
	    this.speedX = 1;
	    this.speedY = 4;
	    this.innerX = this.x+this.w/2;
	    this.innerY = this.y+this.h/2;
	    this.innerW= this.w/2;
	    this.innerH = this.h/2;
	    //display method
	    this.display = function(){
	      //lets draw something
			//console.log("This shape " + document.getElementById('floatingText').value + "is being displayed rn");
			context.beginPath();
			context.font = "15px Helvetica";
			context.fillStyle = 'red';
	    context.fillText(document.getElementById('floatingText').value, this.x, this.y);
	    //context.clearRect(this.innerX,this.innerY,this.innerW,this.innerH);
			context.closePath();

	    }

			this.update = function(){
				//console.log("This shape is being moved rn");
	      //edges bouncing specifically for a rect with corner coords.
	      if(this.x>(canvas.width-this.innerW)||this.x<0){
	        this.speedX*=-1;
	      }
	      if(this.y>(canvas.height-this.innerH)||this.y<0){
	        this.speedY*=-1;
	      }

	      //change by speed ...
	      this.x+=this.speedX;
	      this.y+=this.speedY;
	      //need to update the inner vars here ....
	      this.innerX = this.x;
	      this.innerY = this.y;
	    }

	}

}
</script>
</head>


<body>
	<canvas id="myCanvas"></canvas>
</body>

<footer class="bottomnav">


	<section class="flexbox">
		<div class="stretch">
			<input id="floatingText" type="text" placeholder="Type something..." />
            </div>
			<div class="normal">
				<button id="enterButton" >WRITE</button>
			</div>
	</section>




</footer>

</html>
